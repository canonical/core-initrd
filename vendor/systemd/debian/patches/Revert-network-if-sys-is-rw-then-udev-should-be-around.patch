From: Balint Reczey <balint.reczey@canonical.com>
Date: Wed, 22 Jan 2020 16:12:03 +0100
Subject: Revert "network: if /sys is rw, then udev should be around"

The change broke networking in LXD containers

This reverts commit 96d7083c5499b264ecebd6a30a92e0e8fda14cd5.

LP: #1857123
---
 src/network/networkd-link.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

--- a/src/network/networkd-link.c
+++ b/src/network/networkd-link.c
@@ -66,6 +66,7 @@
 #include "tmpfile-util.h"
 #include "udev-util.h"
 #include "util.h"
+#include "virt.h"
 #include "vrf.h"
 
 bool link_ipv4ll_enabled(Link *link) {
@@ -1456,7 +1457,7 @@
 
         assert(link);
 
-        if (!udev_available())
+        if (detect_container() > 0)
                 return link_initialized_and_synced(link);
 
         /* udev should be around */
